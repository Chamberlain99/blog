<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机网络 | 程序员成长-修炼中心 「作者：陈楚城」</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="个人博客-学习总结">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e18aa1b7.css" as="style"><link rel="preload" href="/blog/assets/js/app.9263c995.js" as="script"><link rel="preload" href="/blog/assets/js/2.d440b3c8.js" as="script"><link rel="preload" href="/blog/assets/js/3.34bcc327.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.e0d79a82.js"><link rel="prefetch" href="/blog/assets/js/100.485fb97a.js"><link rel="prefetch" href="/blog/assets/js/101.0fd93329.js"><link rel="prefetch" href="/blog/assets/js/102.e9bd4214.js"><link rel="prefetch" href="/blog/assets/js/103.60fbcee8.js"><link rel="prefetch" href="/blog/assets/js/104.47716dee.js"><link rel="prefetch" href="/blog/assets/js/105.4d93fc72.js"><link rel="prefetch" href="/blog/assets/js/106.083ee498.js"><link rel="prefetch" href="/blog/assets/js/107.6d31b222.js"><link rel="prefetch" href="/blog/assets/js/108.18d3c04c.js"><link rel="prefetch" href="/blog/assets/js/109.ff47f629.js"><link rel="prefetch" href="/blog/assets/js/11.a957e8bc.js"><link rel="prefetch" href="/blog/assets/js/110.e5c29a8f.js"><link rel="prefetch" href="/blog/assets/js/111.d33ecbb7.js"><link rel="prefetch" href="/blog/assets/js/112.414f82fb.js"><link rel="prefetch" href="/blog/assets/js/113.77f1220f.js"><link rel="prefetch" href="/blog/assets/js/12.aa848dea.js"><link rel="prefetch" href="/blog/assets/js/13.c8202818.js"><link rel="prefetch" href="/blog/assets/js/14.9c3b54f2.js"><link rel="prefetch" href="/blog/assets/js/15.d16c1c87.js"><link rel="prefetch" href="/blog/assets/js/16.b8bf6c90.js"><link rel="prefetch" href="/blog/assets/js/17.ba6586fb.js"><link rel="prefetch" href="/blog/assets/js/18.478f35e6.js"><link rel="prefetch" href="/blog/assets/js/19.b09c5445.js"><link rel="prefetch" href="/blog/assets/js/20.10693f1f.js"><link rel="prefetch" href="/blog/assets/js/21.e5af1a69.js"><link rel="prefetch" href="/blog/assets/js/22.74231e52.js"><link rel="prefetch" href="/blog/assets/js/23.682e257c.js"><link rel="prefetch" href="/blog/assets/js/24.e398fe97.js"><link rel="prefetch" href="/blog/assets/js/25.b2c141d4.js"><link rel="prefetch" href="/blog/assets/js/26.342e5577.js"><link rel="prefetch" href="/blog/assets/js/27.c2a830d2.js"><link rel="prefetch" href="/blog/assets/js/28.05c2645d.js"><link rel="prefetch" href="/blog/assets/js/29.d0bf537a.js"><link rel="prefetch" href="/blog/assets/js/30.dd1613bd.js"><link rel="prefetch" href="/blog/assets/js/31.8f730e15.js"><link rel="prefetch" href="/blog/assets/js/32.91b73cd5.js"><link rel="prefetch" href="/blog/assets/js/33.3c237c67.js"><link rel="prefetch" href="/blog/assets/js/34.ef13fd4b.js"><link rel="prefetch" href="/blog/assets/js/35.9aa08804.js"><link rel="prefetch" href="/blog/assets/js/36.5ddabf50.js"><link rel="prefetch" href="/blog/assets/js/37.c5e72007.js"><link rel="prefetch" href="/blog/assets/js/38.1f9bc1d9.js"><link rel="prefetch" href="/blog/assets/js/39.3e9becf5.js"><link rel="prefetch" href="/blog/assets/js/4.2e8f06f6.js"><link rel="prefetch" href="/blog/assets/js/40.066f8d30.js"><link rel="prefetch" href="/blog/assets/js/41.1b52d6c0.js"><link rel="prefetch" href="/blog/assets/js/42.064fd474.js"><link rel="prefetch" href="/blog/assets/js/43.13a517fe.js"><link rel="prefetch" href="/blog/assets/js/44.2480808c.js"><link rel="prefetch" href="/blog/assets/js/45.eb1a0d19.js"><link rel="prefetch" href="/blog/assets/js/46.48f76509.js"><link rel="prefetch" href="/blog/assets/js/47.f792cb52.js"><link rel="prefetch" href="/blog/assets/js/48.1025e8a1.js"><link rel="prefetch" href="/blog/assets/js/49.03d799fa.js"><link rel="prefetch" href="/blog/assets/js/5.ae9d9bca.js"><link rel="prefetch" href="/blog/assets/js/50.0c3c30ed.js"><link rel="prefetch" href="/blog/assets/js/51.85da1771.js"><link rel="prefetch" href="/blog/assets/js/52.9ac46056.js"><link rel="prefetch" href="/blog/assets/js/53.40863b49.js"><link rel="prefetch" href="/blog/assets/js/54.1a3d7d02.js"><link rel="prefetch" href="/blog/assets/js/55.5f34be27.js"><link rel="prefetch" href="/blog/assets/js/56.f95a359d.js"><link rel="prefetch" href="/blog/assets/js/57.f587a1f8.js"><link rel="prefetch" href="/blog/assets/js/58.f7cbdbd9.js"><link rel="prefetch" href="/blog/assets/js/59.91de6661.js"><link rel="prefetch" href="/blog/assets/js/6.fedbc699.js"><link rel="prefetch" href="/blog/assets/js/60.3773a86b.js"><link rel="prefetch" href="/blog/assets/js/61.49143c37.js"><link rel="prefetch" href="/blog/assets/js/62.a455796a.js"><link rel="prefetch" href="/blog/assets/js/63.985854a7.js"><link rel="prefetch" href="/blog/assets/js/64.38598fcb.js"><link rel="prefetch" href="/blog/assets/js/65.c644fe5a.js"><link rel="prefetch" href="/blog/assets/js/66.82727291.js"><link rel="prefetch" href="/blog/assets/js/67.65fc808c.js"><link rel="prefetch" href="/blog/assets/js/68.e5fdd1b3.js"><link rel="prefetch" href="/blog/assets/js/69.fc80669a.js"><link rel="prefetch" href="/blog/assets/js/7.0b1e2011.js"><link rel="prefetch" href="/blog/assets/js/70.1a3908e6.js"><link rel="prefetch" href="/blog/assets/js/71.965f98ca.js"><link rel="prefetch" href="/blog/assets/js/72.ee5baaf8.js"><link rel="prefetch" href="/blog/assets/js/73.ff621501.js"><link rel="prefetch" href="/blog/assets/js/74.b8579f7e.js"><link rel="prefetch" href="/blog/assets/js/75.cd347de5.js"><link rel="prefetch" href="/blog/assets/js/76.fb00e777.js"><link rel="prefetch" href="/blog/assets/js/77.03438e4b.js"><link rel="prefetch" href="/blog/assets/js/78.fe38d4f7.js"><link rel="prefetch" href="/blog/assets/js/79.15b83ea8.js"><link rel="prefetch" href="/blog/assets/js/8.e75b9aa4.js"><link rel="prefetch" href="/blog/assets/js/80.75df86ce.js"><link rel="prefetch" href="/blog/assets/js/81.d36d20fc.js"><link rel="prefetch" href="/blog/assets/js/82.58728942.js"><link rel="prefetch" href="/blog/assets/js/83.aab25161.js"><link rel="prefetch" href="/blog/assets/js/84.6ad32001.js"><link rel="prefetch" href="/blog/assets/js/85.5e8cdbba.js"><link rel="prefetch" href="/blog/assets/js/86.e4227cfc.js"><link rel="prefetch" href="/blog/assets/js/87.ad6591ad.js"><link rel="prefetch" href="/blog/assets/js/88.1e969690.js"><link rel="prefetch" href="/blog/assets/js/89.2082e5f2.js"><link rel="prefetch" href="/blog/assets/js/9.5ef5356a.js"><link rel="prefetch" href="/blog/assets/js/90.f91fa23a.js"><link rel="prefetch" href="/blog/assets/js/91.9162f53c.js"><link rel="prefetch" href="/blog/assets/js/92.3e77ba6c.js"><link rel="prefetch" href="/blog/assets/js/93.6840abf6.js"><link rel="prefetch" href="/blog/assets/js/94.eadac30c.js"><link rel="prefetch" href="/blog/assets/js/95.db1a2446.js"><link rel="prefetch" href="/blog/assets/js/96.0cf1ce72.js"><link rel="prefetch" href="/blog/assets/js/97.7580e781.js"><link rel="prefetch" href="/blog/assets/js/98.a2360921.js"><link rel="prefetch" href="/blog/assets/js/99.94b0897e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e18aa1b7.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">程序员成长-修炼中心 「作者：陈楚城」</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/note/" class="nav-link">博客文章</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github &amp; 掘金" class="dropdown-title"><!----> <span class="title" style="display:;">Github &amp; 掘金</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chamberlain99" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1855631360537159/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://evel-font-end.github.io/vue-baselib/dist/#/mapcharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blog/contact/" class="nav-link">关于我</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/blog/note/" class="nav-link">博客文章</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github &amp; 掘金" class="dropdown-title"><!----> <span class="title" style="display:;">Github &amp; 掘金</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chamberlain99" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1855631360537159/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://evel-font-end.github.io/vue-baselib/dist/#/mapcharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blog/contact/" class="nav-link">关于我</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">写在前面</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3学习总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>你不知道的css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常见问题总结记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TS &amp; JS进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发工具篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>收藏夹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/2f9958/" aria-current="page" class="active sidebar-link">计算机网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#基础知识" class="sidebar-link">基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#基础概念" class="sidebar-link">基础概念</a></li><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#hub集线器-转发-【物理层】" class="sidebar-link">HUB集线器 转发 【物理层】</a></li><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#csma-cd" class="sidebar-link">CSMA/ CD</a></li><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#sw交换机-【数据链路层】" class="sidebar-link">sw交换机 【数据链路层】</a></li><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#路由器" class="sidebar-link">路由器</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#互联网协议、分布、设计" class="sidebar-link">互联网协议、分布、设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#tcp-ip五层协议" class="sidebar-link">TCP/IP五层协议</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#计算机网络应用篇" class="sidebar-link">计算机网络应用篇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#家庭网络如何通过路由器上网" class="sidebar-link">家庭网络如何通过路由器上网</a></li><li class="sidebar-sub-header"><a href="/blog/pages/2f9958/#snat-和-dnat" class="sidebar-link">SNAT 和 DNAT</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>环境搭建、项目部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>自动化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>QA相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章收藏</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-3c4b8ee7><div class="articleInfo" data-v-3c4b8ee7><ul class="breadcrumbs" data-v-3c4b8ee7><li data-v-3c4b8ee7><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-3c4b8ee7></a></li> <li data-v-3c4b8ee7><a href="/blog/categories/?category=note" title="分类" data-v-3c4b8ee7>note</a></li><li data-v-3c4b8ee7><a href="/blog/categories/?category=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C" title="分类" data-v-3c4b8ee7>计算机网络</a></li></ul> <div class="info" data-v-3c4b8ee7><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-3c4b8ee7><a href="javascript:;" data-v-3c4b8ee7>2022-05-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">计算机网络<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h2> <h3 id="基础概念"><a href="#基础概念" class="header-anchor">#</a> 基础概念</h3> <ul><li>局域网：一个公司、一个家庭、一个学校······</li> <li>城域网：一个地区、一个城市······</li> <li>广域网：一个国家、全世界······</li></ul> <p><img src="https://cdn.ttgtmedia.com/visuals/German/article/hacker-thief-laptop-fotolia.jpg" alt="Dark"></p> <p>最原始的计算机是：1  - 2  、 1 - 3 、 1 - 4</p> <p>但是当计算机变多的时候：就变成了 1 -2 、1-3 、 2-3 、2-4</p> <p>后来就有了：<code>转发</code> 、<code>标识</code>的概念</p> <p><img src="/blog/assets/img/image-20220526102131737.16418c9d.png" alt="image-20220526102131737"></p> <hr> <h3 id="hub集线器-转发-【物理层】"><a href="#hub集线器-转发-【物理层】" class="header-anchor">#</a> HUB集线器 转发 【物理层】</h3> <p><img src="/blog/assets/img/image-20220526102241529.e7057191.png" alt="image-20220526102241529"></p> <p>1，2，3，4，5 发给HUB集线器，集线器再转发给对应的计算机</p> <p>**工作方式：**主机发送数据 （<code>广播</code>），从机侦听属于自己的数据 \ hub没有记录每台设备的标识</p> <p>**问题：**当1发4，但同时发到了2、3、5</p> <p>**解决方法：**4做一个标识，如果数据是发给自己的，就接受这个数据包，否则丢弃</p> <h3 id="csma-cd"><a href="#csma-cd" class="header-anchor">#</a> CSMA/ CD</h3> <p>**另一个问题：**如果2也要发送数据，最后其他计算机接收到的就是混乱的</p> <p>**解决方案：**CSMA/ CD ，发送钱进行载波侦听、如果链路上没有发送数据的时候，才开始发送数据</p> <p><strong>缺点</strong>：利用率低，效率慢、无法满足大规模计算集群的通信需求</p> <h3 id="sw交换机-【数据链路层】"><a href="#sw交换机-【数据链路层】" class="header-anchor">#</a> sw交换机 【数据链路层】</h3> <p>功能类似与HUB集线器</p> <p>功能特性：</p> <div class="language- extra-class"><pre><code>-	可记录地址[ `mac` ]与端口的映射关系
-	交换机中存了一张表：mac与端口的映射关系
-	全双工通信、8根线（1号发送同时、也可同时接收）
</code></pre></div><p><img src="/blog/assets/img/image-20220526105801145.3d1bc247.png" alt="image-20220526105801145"></p> <p>如果刚买的交换机，1号要发信息给6号设备，会经历下面的流程：</p> <ul><li>去交换机中寻找映射表的对应关系，找不到设备1，则把1的mac地址写入、并记录和端口号的关系</li> <li>因为交换机中无路由表，则需要去广播各个端口去寻找目标<code>mac地址</code>所在设备位置、并将6号端口号、和对应<code>mac地址</code>存到路由表中</li></ul> <p><img src="/blog/assets/img/image-20220526111534072.ba7f8049.png" alt="image-20220526111534072"></p> <h3 id="路由器"><a href="#路由器" class="header-anchor">#</a> 路由器</h3> <p>当网络与网络之间通信时，可以通过路由器</p> <p><img src="/blog/assets/img/image-20220526112352022.6d91e373.png" alt="image-20220526112352022"></p> <p>网络是一个抽象的概念</p> <p>IP地址：</p> <div class="language- extra-class"><pre><code>- 用于标识网络、设备
- 用于标记设备在哪个网络下、用于和抽象网络做一个关联
</code></pre></div><p><img src="/blog/assets/img/image-20220526120420514.0f687220.png" alt="image-20220526120420514"></p> <blockquote><p><strong>从1.52到 1.254 是如何通信的？</strong></p></blockquote> <table><thead><tr><th></th> <th></th> <th>IP源地址  - 目标地址</th> <th>源mac地址 - 目标mac地址</th></tr></thead> <tbody><tr><td>第1步</td> <td>0.102 - 0.1</td> <td>0.102 - 1.254</td> <td>mac [0.102 ] - mac[ 0.1 ]</td></tr> <tr><td>第2步</td> <td>0.1 - 1.52</td> <td>不变</td> <td>mac [0.1 ] - mac[ 1.52]</td></tr> <tr><td>第3步</td> <td>1.52 - 1.254</td> <td>不变</td> <td>mac [1.52 ] - mac[ 1.254 ]</td></tr></tbody></table> <p>七层模型：</p> <p><img src="/blog/assets/img/image-20220526121001889.d1ff60b1.png" alt="image-20220526121001889"></p> <h2 id="互联网协议、分布、设计"><a href="#互联网协议、分布、设计" class="header-anchor">#</a> 互联网协议、分布、设计</h2> <p>我在上面说了 Internet 协议，互联网协议按照功能的不同，分为 osi 七层， tcp / ip 五层， tcp / ip 四层协议。如下图：</p> <p><img src="/blog/assets/img/image-20220526121548061.ca420b7c.png" alt="image-20220526121548061"></p> <p>我们只需要弄明白 TCP / IP 五层协议 就能了解和明白计算机最底层的通信是怎么回事。</p> <h3 id="tcp-ip五层协议"><a href="#tcp-ip五层协议" class="header-anchor">#</a> TCP/IP五层协议</h3> <p><img src="/blog/assets/img/image-20220526121649779.638ed8da.png" alt="image-20220526121649779"></p> <h4 id="物理层"><a href="#物理层" class="header-anchor">#</a> 物理层</h4> <p>物理层主要是由双绞线、光缆、电缆、无线电波组成，其作用很简单，就是连接不同的计算机，并传递底层电信号，高电压：1 ，低电压：0 。</p> <h4 id="数据链路层"><a href="#数据链路层" class="header-anchor">#</a> 数据链路层</h4> <p>我们从物理层上接收或者发送单纯的 0 、 1 是没有意义的，为什么呢？想想哈，我想给女朋友发送一句话：“你好漂亮”，那我们要把“你好漂亮”转换成 01 之后，交给网卡，网卡就懵逼了，发给谁 ？？？不知道。那怎么办？必须要确定数据发给谁。就像我们的快递一样，是不是在外层包装上有商家地址和个人地址，这样我们不管是发还是收，都能准确定位了。网络传送数据也一样，我们就在数据前面加上目标地址，为了能接收到回信，也要把自己的地址也加上。但是，如果数据和地址放在一起，又乱了，比如，我给你一堆 01 ，1010101000101010101 ，你也分不清哪里是数据，哪里是地址。这时我们就要对要发送的 01 进行分组，规定前面 xxx 位是地址，后面 xxx 位是数据，并且，大家想互相都能通信，就必须都遵守这样的规则(协议)，这个协议叫以太网协议。在以太网协议出现之前，各个公司都有自己的分组规则，后来都统一使用以太网协议了。<img src="/blog/assets/img/image-20220526122142367.ac5dffc1.png" alt="image-20220526122142367">以太网协议中的地址叫 <code>MAC 地址</code>， MAC 地址是每台计算机唯一的物理地址，是被写在网卡上的。以太网协议规定，每一台接收和发送数据的设备必须要装有网卡，负责发送和接收数据的设备，发送端和接收端的地址，指的就是网卡的地址，即 MAC 地址。</p> <p><strong>交换机</strong></p> <p>在这给大家介绍一个东西，我们说两个电脑要通信要先连根线，但是如果电脑多了之后，电脑间通信连的线也就多了，这样太乱了，我介绍的这个东西就是交换机，它是负责组件局域网，研究的是 MAC 地址，它有什么用你看下面图片中的接口就知道了</p> <p><img src="/blog/assets/img/image-20220526125504817.92bc06ec.png" alt="image-20220526125504817"></p> <p>有了 MAC 地址，以太网就可以进行工作了.理论上讲，我们可以和世界上的每一台连接了互联网的计算机进行通信了，此时通信的方案是：广播</p> <p><strong>广播</strong></p> <p>广播又是怎么一回事？其实广播的方式很原始，基本通信就是靠吼。就像你想跟女朋友求婚一样，你会大喊：“ xxx ，嫁给我吧”，旁边能听到这句话的人有很多，但是只有你女朋友会回复你。其他人会把你当傻D一样看待。没错，广播就是这样进行通信的。首先组织好了一个数据包之后，把这个数据包通过电信号发出去，这时整个网络上所有的人都会收到你发的这条数据，然后看看这个数据是不是自己的。如果不是就当他不存在，如果是，就接收。虽然效率低点，但毕竟能通信了。</p> <p><img src="/blog/assets/img/image-20220526125546555.28c5e516.png" alt="image-20220526125546555"></p> <p>广播带来什么问题呢？如果是在一个小的网络环境里。比方说，你们宿舍几个人，一起玩 CS ，没问题，你喊一嗓子，你室友也能回应你，也就效率低点。但是如果你连接到全世界的互联网上，还使用广播的方式来通信，就不是效率问题了，而是一个巨大的通信灾难。全世界 60 多亿人，每个人吼一嗓子，每个人发送一条信息，那每个人都会收到 60 多亿条信息，网络瞬间瘫痪，这种问题被称为广播风暴，那如何解决呢？</p> <p><img src="/blog/assets/img/image-20220526125601069.d64833be.png" alt="image-20220526125601069"></p> <h4 id="网络层"><a href="#网络层" class="header-anchor">#</a> 网络层</h4> <p><img src="/blog/assets/img/image-20220526125639164.243c1c16.png" alt="image-20220526125639164"></p> <p>首先，我们要了解一个事情，世界大网络(广域网)是由一个一个的互相隔离的小型局域网(子网)组成的，不同的局域网之间使用路由来连接</p> <h5 id="路由器-2"><a href="#路由器-2" class="header-anchor">#</a> 路由器</h5> <p><strong><code>路由器</code>具有哪些属性？</strong></p> <div class="language- extra-class"><pre><code>*	路由器跟计算机一样内部拥有用于2张用于通信的网卡，WAN口 + LAN口
*	具有各自的`MAC地址`
</code></pre></div><p><img src="/blog/assets/img/image-20220531165200771.54a16533.png" alt="image-20220531165200771"></p> <hr> <p>上面说的交换机是负责组建局域网，研究的是 MAC 地址，而路由器是负责组件广域网，研究的是 IP 地址，这个 IP 地址下面我再解释</p> <p><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20220526125735716.png">image-20220526125735716</a></p> <p>刚才说的广播，只能在一个局域网内进行通信，不可以在大网络上进行广播，有了路由器，就避免了广播风暴的问题。每个局域网被称为一个广播域，局域网和局域网之间使用路由的方式进行通信(向不同的广播域/子网发送数据包)，用路由器把一个局域 网里的所有计算机划分成一个个子网。</p> <p>现在大家先想一想生活中，如果是之前说的广播，就相当于在一间教室里你正在上课，你要给某个女孩传纸条，那你要在纸条外面写上你和你要传的女孩的名字，再在里面写上你要写的话，写好后折起来，你和女孩的名字在外，内容在内，然后让同学一个一个帮你传，每个同学在传的时候都会看外面写的名字，如果不是他，就继续传，直到传到的人是你写的那个女孩为止。那这间教室就相当于一个局域网。好，现在我们要实现局域网和局域网之间的通信，比如此时位于青海的你要给河南的朋友送东西，你不可能用广播的方式了，你只能快递，这个青海和河南以及还有很多不同的省份是我国的土地划分中的一部分，每一个省也可以看作是一个个局域网，那在网络中，我国就相当于广域网，那不同的局域网是如何划分的呢？MAC 地址是没办法区分的，因为  MAC 地址上只有厂商的流水号，这就引出我要说的网络层，网络层引出了一套新的地址来区分不同的局域网/子网，这一套地址就是网络地址。</p> <p>规定网络地址的协议叫 IP 协议，它定义的地址叫 IP 地址。其实跟我国的省份名差不多，继续说送快递，你要把送的东西包装好，在外面写上你自己的地址和省份地址，还有朋友的地址和省份地址，交给青海的快递公司，然后青海的快递公司转交给河南的快递公司，最后由河南的快递公司分配给你朋友，你朋友就收到快递了。在这有两点需要注意：</p> <ul><li>你要同时写两个地址，自己的地址( MAC 地址)和省份地址( IP 地址)，这样就能确定所要 接收和发送人的具体的位置了。</li> <li>青海的快递公司和河南的快递公司就相当于路由器</li></ul> <h5 id="子网掩码"><a href="#子网掩码" class="header-anchor">#</a> 子网掩码</h5> <p>在这给大家普及一下子网掩码，我们上面说有了 IP 地址和 MAC 地址，我们就能让任何计算机之间进行通信了，那现在再想想，如果我要用我的计算机给另外一台计算机实现通信，我是不是要判断要通信的计算机是否和我的计算机在同一个 IP 地址中，相当于上面例子中我和我要送东西的朋友是否在一个省，这个时候就需要用子网掩码，我拿着我的 IP 地址和对方的子网掩码通过计算，判断是否在同一个 IP 地址下，如果在同一个IP 地址下，我可以用广播的形式进行通信，如果不在同一个 IP 地址下，我可以先把数据传给我方的路由器，再由我方的路由器把数据传给对方的路由器，最后由对方的路由器把数据传给要接收数据的计算机。这样说，再联系上面已经说过的，我想不难理解了。</p> <blockquote><p>子网掩码的核心作用就是：检查某个IP地址A , 是否与另一个已知IP处于同一个局域网内.</p> <p>如果A地址的前32位，按位与子网掩码进行 &amp; 与运算，</p></blockquote> <p><img src="/blog/assets/img/image-20220531114012457.85e9db91.png" alt="image-20220531114012457"></p> <p><img src="/blog/assets/img/image-20220531113617904.f3444ede.png" alt="image-20220531113617904"></p> <p>如果两个ip与<code>子网掩码</code>进行 <code>&amp;</code>运算后，结果一样，则证明两个IP 同在一个<code>子网</code>当中</p> <h5 id="ip地址"><a href="#ip地址" class="header-anchor">#</a> IP地址</h5> <p>目前我们普遍使用的是 IPV4 ，它规定，一个网络地址由 32 位二进制组成，把 32 位平均分成四份，每一份  8 位， 8 位最大能表示的数据是 255 ，所以IP地址的范围：0.0.0.0255.255.255.255.</p> <p>一个IP地址分为两部分，分别是网络位和主机位</p> <p>网络位用来标识不同的子网主机位用来标识子网下主机的编号</p> <p>为什么要分两部分呢？很简单，就好比你想写信给你的女朋友，假设你女朋友的地址是西宁市平安路128号，那么网络位就会直接找到西宁市，主机位帮你找到你的女朋友。</p> <p>网络位和主机位是如何划分的？使用子网掩码来划分。子网掩码和IP地址差不多，都是由32位二进制数来表示，子网掩码也分为网络部分和主机部分，网络部分由1组成，主机部分由0组成。</p> <p><img src="https://filescdn.proginn.com/c1a7a125c4ca8f65d517f02eaa8be90f/29a0f442a574a9c65d624ae7f677358c.webp" alt="img"></p> <p>那说了这么多，IP协议是如何发送数据的？协议规定，IP协议使用IP数据包进行发送 数据。IP数据包同样把数据分为了两部分，head和data，并且在发送数据的时候，直 接用IP数据包直接装载以太网的data部分。</p> <p><img src="https://filescdn.proginn.com/ae8d6697e87aee733379d65dae350170/de149b6863561252b6211b9b0502cffb.webp" alt="img"></p> <p>head:长度为 20 到 600 字节</p> <p>data:最长为 65515 字节</p> <p>而以太网数据包的“数据”部分，最长只有 1500 字节，因此，如果IP数据包超过了 1500 字节，它就需要分割成几个以太网数据包，分开发送了。</p> <p>再回顾一下啊，以太网的头是包含了自己的 MAC 地址和目标 MAC 地址的，那如何查 找目标 MAC 地址呢？前辈们弄了一个叫 ARP 协议的东西专门来解析目标 MAC 地址。它是如何工作的？首先，它是数据链路层的东西，在我们发送一个数据包的时候是包含着对方的 IP 地址的。例如我(172.13.4.58)想发送一条数据给女朋友(172.13.4.90),首 先，我得先拿到女朋友的MAC地址才可以通信。此时，我们会先计算一下我和女朋友 是否在一个子网内(子网掩码)</p> <p>在一个子网内，直接广播发送一个数据包</p> <p><img src="https://filescdn.proginn.com/0995ccc9672cb9ad4cde433b6c43ac5c/a8a4baa3b496783453fed43486b1b294.webp" alt="img"></p> <p>子网内的计算机发现了这个包之后会返回一个数据包并且带有 MAC 地址，这样就通过 IP 地址找到了目标主机的 MAC 地址，接下来就可以进行数据传输了。</p> <p>不在一个子网内，单纯的用广播就不行了，因为广播只是针对自己内网而言。那怎么办，此时会把数据包发给网关，由网关发给其它路由，这样在整个万维网里就可以找到你想要的那个计算机的 MAC 地址了。</p> <hr> <h5 id="网关"><a href="#网关" class="header-anchor">#</a> 网关</h5> <p><strong>概念</strong>：连接两个不同的网络的设备都可以叫做<code>网关</code></p> <ul><li>路由器是一种设备</li> <li>路由器可以实现网关的功能，但是路由器功能不仅仅是实现网关</li> <li>网关可以由路由器实现，但是也不仅仅是由路由器实现</li></ul> <hr> <p>​	子网有什么意义呢？</p> <p>​	在TCP/IP协议中，不同子网是不能直接通信的，如果要通信，需要通过网关来转发。</p> <p>​	网关上有2张网卡，分别配置了属于两个<code>子网的IP地址</code></p> <p><img src="/blog/assets/img/image-20220531114450634.b005bd13.png" alt="image-20220531114450634"></p> <hr> <p>如果局域网内的计算机a，要发送数据，则先判断目标<code>目标ip</code>是否跟a属于同个子网</p> <ul><li><p>是，则直接从a的网卡发出</p></li> <li><p>否，将数据包的目标mac改为网关mac发出</p> <ul><li>网关 - 通过路由表查询</li> <li>数据包属于子网2 （网关修改目标mac地址修改为计算机b的mac地址，修改源mac地址为自己的mac地址）</li> <li>最后数据从子网2的网卡发出</li></ul></li></ul> <p><img src="/blog/assets/img/image-20220531115240374.b17a436b.png" alt="image-20220531115240374"></p> <hr> <p><code>什么是路由？</code></p> <p><img src="/blog/assets/img/image-20220531115521759.dff31a16.png" alt="image-20220531115521759"></p> <h5 id="默认网关"><a href="#默认网关" class="header-anchor">#</a> 默认网关</h5> <p>​	什么是<code>默认网关（IP层）</code>？</p> <p>​	默认网关是局域网中每一台计算机都有的一个地址，这个地址的意义是用于当a要与b通信时，如果a与b不在一个局域网内的时候，那么a会将数据包发送给默认网关，由默认网关再转发到其他的子网</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/325b7b28445c88adff61da320f24a277.gif" alt="图片"></p> <blockquote><p><a href="https://blog.csdn.net/agonie201218/article/details/112919887" target="_blank" rel="noopener noreferrer">大白话带你重拾计算机网络<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h5 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h5> <ul><li>ARP 就是通过 IP 地址来查找 MAC 地址的一套固定协议，它是数据链路层的内容。</li> <li>网络层的意义：定义了子网， 区分各个局域网</li> <li>IP 地址：网络地址</li> <li>子网掩码：计算是否是同一个子网</li></ul> <blockquote><p>从节点角度看：</p> <p>​	<strong>计算机视角</strong></p> <ul><li>首先我要知道我的 IP 以及对方的 IP</li> <li>通过子网掩码判断我们是否在同一个子网</li> <li>在同一个子网就通过 arp 获取对方 mac 地址直接扔出去</li> <li>不在同一个子网就通过 arp 获取默认网关的 mac 地址直接扔出去</li></ul> <hr> <p>​	<strong>交换机视角：</strong></p> <ul><li><p>我收到的数据包必须有目标 MAC 地址</p></li> <li><p>通过 MAC 地址表查映射关系</p></li> <li><p>查到了就按照映射关系从我的指定端口发出去</p></li> <li><p>查不到就所有端口都发出去</p> <hr> <p><strong>路由器视角：</strong></p></li> <li><p>我收到的数据包必须有目标 IP 地址</p></li> <li><p>通过路由表查映射关系</p></li> <li><p>查到了就按照映射关系从我的指定端口发出去（不在任何一个子网范围，走其路由器的默认网关也是查到了）</p></li> <li><p>查不到则返回一个路由不可达的数据包</p></li></ul> <hr> <p>​	<strong>涉及到的三张表分别是</strong></p> <ul><li><p>交换机中有 <strong>MAC 地址</strong>表用于映射 MAC 地址和它的端口</p></li> <li><p>路由器中有<strong>路由表</strong>用于映射 IP 地址(段)和它的端口</p></li> <li><p>电脑和路由器中都有** arp 缓存表**用于缓存 IP 和 MAC 地址的映射关系</p> <p><strong>这三张表是怎么来的</strong></p></li> <li><p>MAC 地址表是通过以太网内各节点之间不断通过交换机通信，不断完善起来的。</p></li> <li><p>路由表是各种路由算法 + 人工配置逐步完善起来的。</p></li> <li><p>arp 缓存表是不断通过 arp 协议的请求逐步完善起来的。</p></li></ul></blockquote> <p>网络层（IP协议）本身没有传输包的功能，包的实际传输是委托给数据链路层（以太网中的交换机）来实现的。</p> <h4 id="传输层"><a href="#传输层" class="header-anchor">#</a> 传输层</h4> <p>到目前为止，前三层内容已经可以进行数据传输了。但是，我们的一台计算机上可以 一次性运行多个网络应用程序，比如， QQ 、微信 、 LOL 三个软件一起运行，都要进行网络传输，但是就前面学习的这三层内容，是没办法区分开数据是要发送给哪一个 软件的。那怎么办？引入第四层，传输层，传输层定义了端口的概念，每一个网络应 用程序占用一个网络端口，不同的程序就用端口把数据隔离，两两互相不影响。</p> <ul><li>端口：应用程序和网卡的关联编号</li> <li>传输层：建立端口到端口的通信。</li> <li>传输层有两种协议：TCP 和 UDP</li></ul> <p><img src="https://filescdn.proginn.com/fea0f08c6a01dd362ae3f0802407716e/eaa6825a312b1de14d6906ebd6234ed0.webp" alt="img"></p> <h5 id="tcp协议"><a href="#tcp协议" class="header-anchor">#</a> TCP协议</h5> <p>TCP 协议：可靠传输， TCP 数据包没有长度限制，理论上可以无限长，但是为了保证网络的 效率，通常 TCP 数据包的长度不会超过 IP 数据包的长度，以确保单个 TCP 数据包不必再分割。</p> <p><img src="https://filescdn.proginn.com/219682f6ed4ee252e5e2d6464636431a/844c869d944eeea92564d3af2cc5c74c.webp" alt="img"></p> <p>TCP 头放的主要是源端口和目标端口</p> <h5 id="udp协议"><a href="#udp协议" class="header-anchor">#</a> UDP协议</h5> <p>UDP 协议：不可靠传输，“报头”部分一共只有 8 个字节，总长度不超过 65535 字节，正好放 进一个 IP 数据包。</p> <p><img src="https://filescdn.proginn.com/a4b7de73f2c2d856cdd4e585c5c8683e/67a4bcc9948c549f5ef27097f1b65fd5.webp" alt="img"></p> <p>其实和邮信是一样的，写好地址，写好接收人，直接装进信封里，丢进邮箱里就不用你管了，对方什么时候收，收没收到，你不知道。</p> <h4 id="应用层"><a href="#应用层" class="header-anchor">#</a> 应用层</h4> <p>用户使用的都是应用程序，均工作于应用层，大家都可以开发自己的应用程序，数据多种多样，必须规定好数据的组织形式。对于用于而言最直观的就是应用层。</p> <p>应用层：规定应用程序的数据格式</p> <p>例：TCP 协议可以为各种各样的程序传递数据，比如 Email 、 WWW 、 FTP 等，那么， 必须有不同协议规定电子邮件、网页、 FTP 数据的格式，这些应用程序协议就构成了“应用层”。</p> <h5 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h5> <p>以上是对TCP/IP5层协议的解读，总结一下：</p> <p><img src="https://filescdn.proginn.com/be8ebb6f438880a5765593d9229cb964/438ac7fb17633a3ab64b170f5042fef1.webp" alt="img"></p> <p>发送数据其实就是一个封装数据的过程</p> <p><img src="https://filescdn.proginn.com/f2724c4fd225c3d94386ae1bce6e4508/c490fe56233ee7d267993b853589c43a.webp" alt="img"></p> <p>最后从物理层发出，对方接收到了之后再自下而上一层一层打开拿到数据，以上内容就是一个网络传输的大致过程，其中还有好多细节没有阐述，但大家知道和了解以上内容，对开发而言足够了。</p> <h2 id="计算机网络应用篇"><a href="#计算机网络应用篇" class="header-anchor">#</a> 计算机网络应用篇</h2> <h3 id="家庭网络如何通过路由器上网"><a href="#家庭网络如何通过路由器上网" class="header-anchor">#</a> 家庭网络如何通过路由器上网</h3> <p>不同家庭网络同一个服务器，为什么IP不会冲突</p> <p><img src="/blog/assets/img/image-20220531130632538.eb429a14.png" alt="image-20220531130632538"></p> <p><img src="/blog/assets/img/image-20220531130612188.55179400.png" alt="image-20220531130612188"></p> <p><img src="/blog/assets/img/image-20220531130948360.7c7388f4.png" alt="image-20220531130948360"></p> <h3 id="snat-和-dnat"><a href="#snat-和-dnat" class="header-anchor">#</a> SNAT 和 DNAT</h3> <p>NAT（Network Address Translation，网络地址转换）是将IP 数据包头中的IP 地址转换为另一个IP 地址的过程。</p> <p>在实际应用中，NAT 主要用于实现私有网络访问公共网络的功能。这种通过使用少量的公有IP 地址代表较多的<a href="https://www.baidu.com/s?wd=%E7%A7%81%E6%9C%89IP&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">私有IP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 地址的方式，将有助于减缓可用IP地址空间的枯竭</p> <ul><li><p>DNAT Destination Network Address Translation 目的网络地址转换，</p></li> <li><p>SNAT Source Network Address Translation 源网络地址转换</p></li></ul> <p>其作用是将ip数据包的<a href="https://www.baidu.com/s?wd=%E6%BA%90%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">源地址转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>成另外一个地址，可能有人觉得奇怪，好好的为什么要进行<a href="https://www.baidu.com/s?wd=ip%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">ip地址转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>啊，为了弄懂这个问题，我们要看一下局域网用户上公网的原理：</p> <p>假设内网主机A（192.168.2.8）要和外网主机B（61.132.62.131）通信，A向B发出IP数据包，如果没有SNAT对A主机进行<a href="https://www.baidu.com/s?wd=%E6%BA%90%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">源地址转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，A与B主机的通讯会不正常中断，因为当路由器将内网的数据包发到<a href="https://www.baidu.com/s?wd=%E5%85%AC%E7%BD%91IP&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">公网IP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>后，<a href="https://www.baidu.com/s?wd=%E5%85%AC%E7%BD%91IP&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">公网IP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>会给你的私网IP回数据包，这时，<a href="https://www.baidu.com/s?wd=%E5%85%AC%E7%BD%91IP&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">公网IP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>根本就无法知道你的私网IP应该如何走了。所以问它上一级路由器，当然这是肯定的，因为从公网上根本就无法看到私网IP，因此你无法给他通信。为了实现数据包的正确发送及返回，网关必须将A的址转换为一个合法的公网地址，同时为了以后B主机能将数据包发送给A，这个合法的公网地址必须是网关的外网地址，如果是其它公网地址的话，B会把数据包发送到其它网关，而不是A主机所在的网关，A将收不到B发过来的数据包，所以内网主机要上公网就必须要有合法的公网地址，而得到这个地址的方法就是让网关进行SNAT(<a href="https://www.baidu.com/s?wd=%E6%BA%90%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">源地址转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>），将内网<a href="https://so.csdn.net/so/search?q=%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">地址转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>成公网址(一般是网关的外部地址），所以大家经常会看到为了让内网用户上公网，我们必须在routeros的firewall中设置snat，俗称<a href="https://www.baidu.com/s?wd=IP%E5%9C%B0%E5%9D%80%E6%AC%BA%E9%AA%97&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y4uHTYnywbPH6srjcYuWR40ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3En1ndPjm1rHcs" target="_blank" rel="noopener noreferrer">IP地址欺骗<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>或伪装（masquerade)</p> <p>具体可<code>参考3.2</code>的模型图</p> <p>文章参考来源：<a href="https://blog.csdn.net/agonie201218/article/details/112919887" target="_blank" rel="noopener noreferrer">万字大白话带你重拾计算机网络<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">6/10/2022, 3:50:54 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/6d567e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">mysql</div></a> <a href="/blog/pages/b15df1/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">利用Xshell更新前端项目</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/6d567e/" class="prev">mysql</a></span> <span class="next"><a href="/blog/pages/b15df1/">利用Xshell更新前端项目</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/160bed/"><div>
            网站
            <!----></div></a> <span class="date">06-10</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/eb302e/"><div>
            nav
            <!----></div></a> <span class="date">06-09</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/881273/"><div>
            gitlab-CICD自动化部署
            <!----></div></a> <span class="date">06-08</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.9263c995.js" defer></script><script src="/blog/assets/js/2.d440b3c8.js" defer></script><script src="/blog/assets/js/3.34bcc327.js" defer></script>
  </body>
</html>
